var pageExt = function() {

  function downloadFile(fileName, fileUrl) {
    var xhr = new XMLHttpRequest();
    xhr.open('get', encodeURI(fileUrl), true);//IE某些版本无法把中文自动编码，所以需要用encodeURI手动编码
    xhr.responseType = 'blob'; // 返回类型blob
    // 定义请求完成的处理函数，请求前也可以增加加载框/禁用下载按钮逻辑
    xhr.onload = function() {
      // 请求完成
      // 返回200
      var blob = this.response;
      var href = window.URL.createObjectURL(blob); // 创建下载的链接
      // 判断是否是IE浏览器，是的话返回true
      if (window.navigator.msSaveBlob) {
        try {
          window.navigator.msSaveBlob(blob, fileName);
        } catch (e) {
          console.log(e);
        }
      } else {
        // 谷歌浏览器 创建a标签 添加download属性下载
        var downloadElement = document.createElement('a');
        downloadElement.href = href;
        downloadElement.target = '_blank';
        downloadElement.download = fileName; // 下载后文件名
        document.body.appendChild(downloadElement);
        downloadElement.click(); // 点击下载
        document.body.removeChild(downloadElement); // 下载完成移除元素
        window.URL.revokeObjectURL(href); // 释放掉blob对象
      }
    };
    // 发送ajax请求
    xhr.send();
  };

  $(function() {

  });

  return {
    downloadFile: downloadFile
  };
}();
